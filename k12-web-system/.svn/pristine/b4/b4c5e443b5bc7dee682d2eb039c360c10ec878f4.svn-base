package com.wdcloud.ueditor.extend.ueditor;

import java.util.Map;

import com.baidu.ueditor.define.State;

public class UeditorFileManager {

	private String[]		allowFiles		= null;
	private int				count			= 0;

	private UeditorService	ueditorService	= null;

	public UeditorFileManager(Map<String, Object> conf, UeditorService ueditorService) {

		allowFiles = getAllowFiles(conf.get("allowFiles"));
		count = (Integer) conf.get("count");

		this.ueditorService = ueditorService;
	}

	public State listFile(int index) {

		return ueditorService.listFile(allowFiles, index, count);
	}

	private String[] getAllowFiles(Object fileExt) {

		String[] exts = null;
		String ext = null;

		if (fileExt == null) {
			return new String[0];
		}

		exts = (String[]) fileExt;

		for (int i = 0, len = exts.length; i < len; i++) {

			ext = exts[i];
			exts[i] = ext.replace(".", "");

		}

		return exts;

	}

}
